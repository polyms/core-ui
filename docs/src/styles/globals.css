@reference './tailwind.css';

/* #root,
body {
  grid-template-columns: 0 1fr;
  @apply grid w-screen;

  @media (min-width: 768px) {
    grid-template-columns: auto 1fr;
  }
} */

#root {
  @apply grid min-h-dvh w-screen;
  grid-template-columns: 1fr;
  grid-template-areas:
    'main-content'
    'navigation';
  grid-template-rows: 1fr auto;

  @media (min-width: 768px) {
    grid-template-columns: auto 1fr;
    grid-template-rows: auto 1fr;
    grid-template-areas:
      'name navigation'
      'app-sidebar main-content';
  }
}

#app-name {
  grid-area: name;

  @apply border-r border-slate-300 bg-slate-50/80;

  @media (min-width: 768px) {
    position: sticky;
    top: 0;
  }
}

#app-navigation {
  grid-area: navigation;

  @media all and not (min-width: 768px) {
    box-shadow:
      0 -4px 6px -1px rgb(0 0 0 / 0.1),
      0 -2px 4px -2px rgb(0 0 0 / 0.1);
  }
}

#app-sidebar {
  /* @apply flex flex-col items-start; */

  /* Mobile: full-screen backdrop; panel slides in/out */
  @media all and not (min-width: 768px) {
    position: fixed;
    inset: 0;
    z-index: 50;
    background: transparent;
    pointer-events: none;
  }

  @media all and not (min-width: 768px) {
    .sidebar-closed & {
      background: rgb(0 0 0 / 0.35);
      pointer-events: auto;
    }
  }

  /* Desktop: in-grid + collapsible + slate background + dashed border */
  @media (min-width: 768px) {
    grid-area: app-sidebar;
    @apply w-72 border-e border-slate-300 bg-slate-50/80;
    /* position: sticky;
    top: 56px;
    height: calc(100dvh - 56px);
    transition: width 200ms ease; */

    .sidebar-closed & {
      @apply w-4;
    }
  }
}

.sidebar-content {
  z-index: 1;
  @apply flex h-full w-72 flex-col pt-4;

  @media all and not (min-width: 768px) {
    position: relative;
    transform: translateX(-100%);
    transition: transform 200ms ease;
    will-change: transform;

    .sidebar-closed & {
      transform: translateX(0);
      box-shadow:
        4px 0 6px -1px rgb(0 0 0 / 0.1),
        2px 0 4px -2px rgb(0 0 0 / 0.1);
    }
  }

  @media (min-width: 768px) {
    position: sticky;
    top: 56px;
    height: calc(100dvh - 56px);
    /* transition: width 200ms ease; */

    .sidebar-closed & {
      transform: translateX(-100%);
    }
  }

  .nav-item {
    @apply relative flex items-center gap-2 rounded-lg p-2 text-left text-sm transition-colors;
    @apply w-full cursor-pointer font-semibold no-underline;
    &:not(.active) {
      @apply text-neutral-600 hover:bg-slate-100 hover:text-slate-900;
      @apply focus-visible:bg-slate-100 focus-visible:text-slate-900 focus-visible:outline-none;
    }

    &.active {
      @apply bg-primary/10 text-primary-700;
    }
  }
}

main {
  grid-area: main-content;

  @apply relative flex grow flex-col;
}

.shiki {
  @apply overflow-auto px-6 py-4 text-sm;
}
